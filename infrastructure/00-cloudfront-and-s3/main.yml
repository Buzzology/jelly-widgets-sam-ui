# https://github.com/aws-samples/amazon-cloudfront-secure-static-site
AWSTemplateFormatVersion: 2010-09-09
Description: TesterWidgets set for https site and cloudfront ditribution.

Metadata:
  AWS::CloudFormation::Interface:
    ParameterGroups:
      - Label:
          default: Domain
        Parameters:
          - SubDomain
          - DomainName

Mappings:
  Solution:
    Constants:
      Version: 'v0.7'

# Rules:
#   OnlyUsEast1:
#     Assertions:
#       - Assert:
#           Fn::Equals:
#             - !Ref AWS::Region
#             - us-east-1
#         AssertDescription: |
#           This template can only be deployed in the us-east-1 region.
#           This is because the ACM Certificate must be created in us-east-1

Parameters:
  SubDomain:
    Description: The part of a website address before your DomainName - e.g. www or img
    Type: String
    Default: www
    AllowedPattern: ^[^.]*$
  DomainName:
    Description: The part of a website address after your SubDomain - e.g. example.com
    Type: String
  HostedZoneId:
    Description: HostedZoneId for the domain e.g. Z23ABC4XYZL05B
    Type: String
  CreateApex:
    Description: Create an Apex Alias in CloudFront distribution - yes/no
    Type: String
    Default: 'no'
    AllowedValues: ['yes','no']

Resources:
  CustomResourceStack:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: ./custom-resource.yaml
      Tags:
        - Key: Solution
          Value: ACFS3